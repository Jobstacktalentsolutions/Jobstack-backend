<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="color-scheme" content="light dark" />
    <meta name="supported-color-schemes" content="light dark" />
    <title><%= subject %></title>
    <style>
      :root {
        color-scheme: light dark;
        supported-color-schemes: light dark;
      }
      @media (prefers-color-scheme: dark) {
        .email-container { background-color: #1a1a1a !important; }
        .email-content { background-color: #2d2d2d !important; color: #e0e0e0 !important; }
        .text-primary { color: #e0e0e0 !important; }
        .text-secondary { color: #b0b0b0 !important; }
        .header-text { color: #ffffff !important; }
        .footer { background-color: #2d2d2d !important; color: #b0b0b0 !important; }
        .footer a { color: #60a5fa !important; }
        .info-box { background-color: #374151 !important; }
      }
    </style>
  </head>
  <body style="margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #e8eef3;">
    <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" class="email-container" style="background-color: #e8eef3;">
      <tr>
        <td style="padding: 40px 20px;">
          <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="max-width: 600px; margin: 0 auto;">
            <!-- Main Content Container -->
            <tr>
              <td class="email-content" style="background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                
                <!-- Logo Header -->
                <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%">
                  <tr>
                    <td style="padding: 32px 32px 24px 32px; text-align: center;">
                      <img src="https://jobstack.org/email-assets/logo.svg" alt="Jobstack" width="120" height="58" style="display: block; margin: 0 auto;" />
                    </td>
                  </tr>
                </table>

                <!-- Content -->
                <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%">
                  <tr>
                    <td style="padding: 0 32px 32px 32px;">
                      
                      <h1 class="header-text" style="margin: 0 0 16px 0; font-size: 28px; font-weight: 600; color: #1a1a1a; line-height: 1.3;"><%= subject %></h1>
                      
                      <p class="text-primary" style="margin: 0 0 16px 0; font-size: 16px; line-height: 1.5; color: #4a4a4a;">
                        Hi <%= recipientName %>,
                      </p>

                      <p class="text-primary" style="margin: 0 0 24px 0; font-size: 16px; line-height: 1.5; color: #4a4a4a;">
                        We have an update regarding your job application. Please see the details below.
                      </p>

                      <% if (jobTitle) { %>
                      <!-- Application Details -->
                      <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" class="info-box" style="background-color: #f9fafb; border-radius: 8px; margin: 0 0 24px 0;">
                        <tr>
                          <td style="padding: 20px;">
                            <h3 style="margin: 0 0 12px 0; font-size: 18px; font-weight: 600; color: #1a1a1a;">Application Details</h3>
                            <p class="text-primary" style="margin: 0 0 8px 0; font-size: 15px; color: #4a4a4a;">
                              <strong>Position:</strong> <%= jobTitle %>
                            </p>
                            <% if (companyName) { %>
                            <p class="text-primary" style="margin: 0; font-size: 15px; color: #4a4a4a;">
                              <strong>Company:</strong> <%= companyName %>
                            </p>
                            <% } %>
                          </td>
                        </tr>
                      </table>
                      <% } %>

                      <% if (status) { %>
                      <!-- Status Update -->
                      <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="margin: 0 0 24px 0;">
                        <tr>
                          <td style="padding: 20px; border-radius: 8px; <% if (status === 'accepted' || status === 'approved') { %>background-color: #d4edda; border-left: 4px solid #28a745;<% } else if (status === 'rejected' || status === 'declined') { %>background-color: #f8d7da; border-left: 4px solid #dc3545;<% } else { %>background-color: #d1ecf1; border-left: 4px solid #17a2b8;<% } %>">
                            <h3 style="margin: 0 0 8px 0; font-size: 18px; font-weight: 600; color: <% if (status === 'accepted' || status === 'approved') { %>#155724<% } else if (status === 'rejected' || status === 'declined') { %>#721c24<% } else { %>#0c5460<% } %>;">
                              Status: <%= status.charAt(0).toUpperCase() + status.slice(1) %>
                            </h3>
                            <% if (statusMessage) { %>
                            <p style="margin: 0; font-size: 15px; color: <% if (status === 'accepted' || status === 'approved') { %>#155724<% } else if (status === 'rejected' || status === 'declined') { %>#721c24<% } else { %>#0c5460<% } %>;"><%= statusMessage %></p>
                            <% } %>
                          </td>
                        </tr>
                      </table>
                      <% } %>

                      <% if (nextSteps) { %>
                      <!-- Next Steps -->
                      <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="margin: 0 0 24px 0;">
                        <tr>
                          <td style="padding: 20px; background-color: #e3f2fd; border-radius: 8px; border-left: 4px solid #2563eb;">
                            <h3 style="margin: 0 0 8px 0; font-size: 18px; font-weight: 600; color: #1565c0;">Next Steps</h3>
                            <p style="margin: 0; font-size: 15px; color: #1565c0;"><%= nextSteps %></p>
                          </td>
                        </tr>
                      </table>
                      <% } %>

                      <% if (interviewDate) { %>
                      <!-- Interview Details -->
                      <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="margin: 0 0 24px 0;">
                        <tr>
                          <td style="padding: 20px; background-color: #fff3cd; border-radius: 8px; border-left: 4px solid #ffc107;">
                            <h3 style="margin: 0 0 12px 0; font-size: 18px; font-weight: 600; color: #856404;">Interview Scheduled</h3>
                            <p style="margin: 0 0 8px 0; font-size: 15px; color: #856404;">
                              <strong>Date:</strong> <%= interviewDate %>
                            </p>
                            <% if (interviewTime) { %>
                            <p style="margin: 0 0 8px 0; font-size: 15px; color: #856404;">
                              <strong>Time:</strong> <%= interviewTime %>
                            </p>
                            <% } %>
                            <% if (interviewLocation) { %>
                            <p style="margin: 0; font-size: 15px; color: #856404;">
                              <strong>Location:</strong> <%= interviewLocation %>
                            </p>
                            <% } %>
                          </td>
                        </tr>
                      </table>
                      <% } %>

                      <% if (actionUrl && actionText) { %>
                      <!-- CTA Button -->
                      <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="margin: 0 0 24px 0;">
                        <tr>
                          <td style="text-align: center;">
                            <a href="<%= actionUrl %>" style="display: inline-block; background-color: #2563eb; color: #ffffff; font-size: 16px; font-weight: 600; text-decoration: none; padding: 14px 40px; border-radius: 6px;"><%= actionText %></a>
                          </td>
                        </tr>
                      </table>
                      <% } %>

                    </td>
                  </tr>
                </table>

                <!-- Footer -->
                <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" class="footer" style="background-color: #f9fafb; border-top: 1px solid #e5e7eb;">
                  <tr>
                    <td style="padding: 32px 32px 24px 32px;">
                      
                      <p class="text-secondary" style="margin: 0 0 16px 0; font-size: 14px; line-height: 1.5; color: #6b7280; text-align: center;">
                        Questions or concerns? Get in touch with us at 
                        <a href="mailto:<%= supportEmail %>" style="color: #2563eb; text-decoration: underline;"><%= supportEmail %></a>.<br>
                        Follow us on 
                        <a href="https://twitter.com/jobstack" style="color: #2563eb; text-decoration: none;">Twitter</a>, 
                        <a href="https://facebook.com/jobstack" style="color: #2563eb; text-decoration: none;">Facebook</a> and 
                        <a href="https://instagram.com/jobstack" style="color: #2563eb; text-decoration: none;">Instagram</a>.
                      </p>

                      <p class="text-secondary" style="margin: 0; font-size: 12px; line-height: 1.5; color: #9ca3af; text-align: center;">
                        Don't want any more emails from Jobstack? <a href="<%= websiteUrl %>/unsubscribe" style="color: #2563eb; text-decoration: underline;">Unsubscribe</a>.
                      </p>

                    </td>
                  </tr>
                </table>

              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
  </body>
</html>
